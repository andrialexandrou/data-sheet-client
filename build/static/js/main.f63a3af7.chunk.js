(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{110:function(e,t,n){e.exports=n(311)},115:function(e,t,n){},117:function(e,t,n){},311:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(40),l=n.n(o),i=(n(115),n(7)),s=n(8),c=n(10),u=n(9),d=n(11),m=n(13),h=(n(117),n(41)),f=n.n(h),g=n(42),v=n(17),w=n.n(v),p=n(5),y=n.n(p),b=n(139),E=function(e){function t(e,n){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e,n))).getFromServer=function(e){var t=a.props.dataset,n="http://".concat(window.location.hostname,":4000/").concat(t,"/suggest?geo=").concat(e);return new Promise(function(e,t){w.a.get(n).then(function(t){e(t.data)}).catch(function(e){t(e)})})},a.onClear=function(){a.setState({suggestions:[]})},a.onFetch=y.a.debounce(function(e){var t=e.value;a.getFromServer(t).then(function(e){var t=e.map(function(e){return e.area});a.setState({suggestions:t})})},500),a.renderSuggestion=function(e){return r.a.createElement("div",null,e)},a.renderSelections=function(e){var t=0;return r.a.createElement("div",null,e.map(function(e){return t++,r.a.createElement("div",{key:t},e)}))},a.onKeyDown=function(e){var t=13===e.which,n=8===e.which;if(t){var r=a.state.value;a.props.add({text:r,id:r},"area"),a.setState({value:""})}n&&a.props.remove("last","area")},a.onChange=function(e,t){var n=t.newValue;if("change"===e.type&&a.setState({value:n}),"keydown"===e.type){var r=40===e.which,o=38===e.which,l=a.state.suggestions.indexOf(a.state.value),i=a.state.value;if(o){var s=0===l,c=a.state.suggestions[l-1];i=s?a.state.value:c}if(r){var u=l+1===a.state.suggestions.length,d=a.state.suggestions[l+1];i=u?a.state.value:d}a.setState({value:i})}},a.state={value:"",suggestions:[],selections:[]},a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.state.suggestions,t={value:this.state.value,onChange:this.onChange,onKeyDown:this.onKeyDown,onBlur:function(){},type:"search",placeholder:"location"};return r.a.createElement("div",null,this.renderSelections(this.state.selections),r.a.createElement(b,{suggestions:e,onSuggestionsFetchRequested:this.onFetch,onSuggestionsClearRequested:this.onClear,getSuggestionValue:this.getFromServer,renderSuggestion:this.renderSuggestion,inputProps:t}))}}]),t}(a.Component),k=n(72),C=k.Toolbar,S=k.Data.Selectors;var F=function(e){function t(e,n){var a,o=this;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e,n))).requestFromAPI=function(e){var t=function(e){var t="?";return y.a.forEach(e,function(e,n){var a=n,r=e.join("|"),o="".concat(a,"=").concat(r,"&");t+=o}),t}(a.state.filters);a.getFromServer(t,e)},a.getSize=function(){return a.getRows().length},a.getRows=function(){return S.getRows(a.state)},a.rowGetter=function(e){return a.getRows()[e]},a.onClearFilters=function(){a.setState({filters:{}},a.requestFromAPI)},a.download=function(){a.setState({isWaitingForDownload:!0}),a.requestFromAPI(!0)},a.pleaseHold=function(){alert("Still in development! Come back in a few days?")},a.handleClick=function(e){e.target.offsetParent&&"filter-pane"===e.target.offsetParent.className||a.closeFilters()},a.closeFilters=function(){document.removeEventListener("mousedown",a.handleClick,!1),a.setState({showFilters:!1})},a.openFilters=function(){document.addEventListener("mousedown",a.handleClick,!1),a.setState({showFilters:!0})},a.findKey=function(e){var t="",n=a.measureTypes.find(function(t){return t===e}),r=a.seasonalityEnums.find(function(t){return t.key===e}),o=a.areaTypes.find(function(t){return t===e});return n?t="measure_type":r?t="seasonality_enum":o&&(t="area_type"),t},a.handleChange=function(e){var t=a.state.filters,n=e.target,r="checkbox"===n.type?n.checked:n.value,o=n.name;if("checkbox"===n.type){var l=a.findKey(o);r?t[l]=y.a.uniq((t[l]||[]).concat(o)):(t[l]=y.a.uniq(t[l].filter(function(e){return e!==o})),0===t[l].length&&delete t[l])}a.setState({filters:t},a.requestFromAPI)},a.handleTagDelete=function(e,t){"last"===e&&"area"===t&&(e=a.state.tags.area.length-1);var n=a.state,r=n.filters,o=n.tags;r[t]&&(r[t]=r[t].filter(function(t,n){return n!==e}),0===r[t].length&&delete r[t],o[t]=o[t].filter(function(t,n){return n!==e}),a.setState({filters:r,tags:o},a.requestFromAPI))},a.handleTagAdd=function(e,t){var n=a.state,r=n.filters,o=n.tags;r[t]=(r[t]||[]).concat(e.text),o[t]=(o[t]||[]).concat(e),a.setState({filters:r,tags:o},a.requestFromAPI)},a.DownloadButton=function(){return y.a.isEmpty(a.state.filters)?r.a.createElement("button",{disabled:!0},"Select some stuff below and then you can download."):r.a.createElement("button",{onClick:a.download},"Download current view.")},a.makeCheckboxes=function(e){var t=[],n=0;return e.forEach(function(e){var o="",l="";"object"==typeof e?(o=e.key,l=e.note):o=e,t.push(r.a.createElement("div",{key:n},r.a.createElement("label",null,r.a.createElement("input",{name:o,type:"checkbox",onChange:a.handleChange}),"\xa0",o," ",l))),n++}),r.a.createElement("div",null,t)},a.FilterForm=function(){var e=[9,13];return r.a.createElement("div",{className:"filter-pane"},y.a.isEmpty(a.state.filters)?null:r.a.createElement("div",null,"Meets criteria:",r.a.createElement("ul",null,Object.keys(a.state.filters).map(function(e,t){var n=t+1===y.a.size(a.state.filters),o=a.state.filters[e].join(" OR ");return n||(o+=" AND"),r.a.createElement("li",{key:t},o)})),r.a.createElement("button",{onClick:a.onClearFilters},"Clear Filters"),r.a.createElement(o.DownloadButton,null),a.state.isWaitingForDownload?r.a.createElement("span",{style:{color:"green"}},"\xa0Waiting for download..."):null),r.a.createElement("form",null,r.a.createElement("div",{className:"disclaimer"},"At the moment, text values inserted here must match upper/lowercase and punctuation of the target search field."),r.a.createElement("section",null,r.a.createElement("label",{className:"hide-input"},r.a.createElement("b",null,"Area"),r.a.createElement("div",null,r.a.createElement(g.WithContext,{tags:a.state.tags.area,handleDelete:function(){},handleAddition:function(){},delimiters:e}),r.a.createElement(E,{dataset:"laus",add:a.handleTagAdd,remove:a.handleTagDelete})))),r.a.createElement("section",null,r.a.createElement("label",null,r.a.createElement("b",null,"Period"),r.a.createElement("div",null,r.a.createElement(g.WithContext,{tags:a.state.tags.period,handleDelete:function(e){return a.handleTagDelete(e,"period")},handleAddition:function(e){return a.handleTagAdd(e,"period")},delimiters:e})))),r.a.createElement("section",null,r.a.createElement("label",null,r.a.createElement("b",null,"Label"),r.a.createElement("div",null,r.a.createElement(g.WithContext,{tags:a.state.tags.label,handleDelete:function(e){return a.handleTagDelete(e,"label")},handleAddition:function(e){return a.handleTagAdd(e,"label")},delimiters:e})))),r.a.createElement("section",null,r.a.createElement("b",null,"Area Types"),a.makeCheckboxes(a.areaTypes)),r.a.createElement("section",null,r.a.createElement("b",null,"Measure Types"),a.makeCheckboxes(a.measureTypes)),r.a.createElement("section",null,r.a.createElement("b",null,"Seasonality"),a.makeCheckboxes(a.seasonalityEnums))))},a._columns=[{key:"survey_name",name:"Survey Name",width:160},{key:"series_title",name:"Series Title",width:160},{key:"series_id",name:"Series ID",width:200},{key:"period",name:"Period",width:150},{key:"label",name:"Label",width:150},{key:"seasonality_enum",name:"Seasonality",width:100},{key:"area",name:"Area",width:350},{key:"area_type",name:"Area Type",width:160},{key:"measure_type",name:"Measure Type",width:160},{key:"value",name:"Value",width:200}],a.seasonalityEnums=[{key:"S",note:"(seasonally adjusted)"},{key:"U",note:"(not adjusted)"}],a.areaTypes=["National","Statewide","Metropolitan areas","Metropolitan divisions","Micropolitan areas","Combined areas","Counties and equivalents","Cities and towns above 25,000 population","Cities and towns below 25,000 population in New England","Parts of cities that cross county boundaries","Multi-entity small labor market areas","Intrastate parts of interstate areas","Balance of state areas","Census regions","Census divisions"],a.measureTypes=["Unemployment Rate","Unemployment","Employment","Labor Force"],a.state={showFilters:!1,rows:[],filters:{},tags:{}},a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"getFromServer",value:function(e,t){var n=this,a="http://".concat(window.location.hostname,":4000/laus");t&&(a+="/download"),e&&(a+=e),w.a.get(a).then(function(e){if(t){var a=e.headers,r=new Blob([e.data],{type:a["content-type"]}),o=document.createElement("a");o.style.display="none",o.href=window.URL.createObjectURL(r),o.download=function(){var e=new Date;return"LAUS_".concat(1900+e.getYear(),"-").concat(e.getMonth(),"-").concat(e.getDate(),".csv")}(),o.click(),n.setState({isWaitingForDownload:!1})}else{n._rows=e.data;var l=e.data[e.data.length-1];l&&l.hasMoreResults,n.setState({rows:n._rows})}}).catch(function(e){console.log("Resource not available.\n",e)})}},{key:"componentWillMount",value:function(){this.getFromServer()}},{key:"render",value:function(){return this._rows?r.a.createElement("div",null,r.a.createElement("div",{className:"filter-trigger"},r.a.createElement("button",{onClick:this.openFilters},"Apply Filters"),this.state.showFilters&&r.a.createElement(this.FilterForm,null)),r.a.createElement("div",{style:{position:"absolute",left:"0",width:"100%"}},r.a.createElement(f.a,{columns:this._columns,rowGetter:this.rowGetter,rowsCount:this.getSize(),minHeight:600,minColumnWidth:120,toolbar:r.a.createElement(C,null)}),r.a.createElement("div",{className:"disclaimer"},"Data above is only the first 100 rows. If you choose to download your current filter, it will provide the full dataset as stored in the database."))):null}}]),t}(a.Component),j=n(72),O=j.Toolbar,D=j.Data.Selectors,A=function(e){function t(e,n){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e,n))).getSize=function(){return a.getRows().length},a.getRows=function(){return D.getRows(a.state)},a.rowGetter=function(e){return a.getRows()[e]},a.handleFilterChange=function(e){var t=Object.assign({},a.state.filters);e.filterTerm?t[e.column.key]=e:delete t[e.column.key],a.setState({filters:t})},a.onClearFilters=function(){a.setState({filters:{}})},a.state={rows:[],filters:{}},a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"componentWillMount",value:function(){w.a.get("http://".concat(window.location.hostname,":4000/unemp")).then(function(e){console.log("response",e)})}},{key:"render",value:function(){return this._rows?r.a.createElement(f.a,{columns:this._columns,rowGetter:this.rowGetter,rowsCount:this.getSize(),minHeight:600,minColumnWidth:120,toolbar:r.a.createElement(O,{enableFilter:!0}),onAddFilter:this.handleFilterChange,onClearFilters:this.onClearFilters}):r.a.createElement("div",null,"Hi there, still working on it!")}}]),t}(a.Component),T=function(e){function t(e,n){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e,n))).state={grid:"labor"},a.handleClick=a.handleClick.bind(Object(m.a)(Object(m.a)(a))),a.showGrid=a.showGrid.bind(Object(m.a)(Object(m.a)(a))),a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"handleClick",value:function(e){this.setState({grid:e})}},{key:"showGrid",value:function(){return"labor"===this.state.grid?r.a.createElement(F,null):"unemployment"===this.state.grid?r.a.createElement(A,null):void 0}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("button",{onClick:function(){return e.handleClick("labor")}},"National and Local Labor Force Statistics"),r.a.createElement("button",{onClick:function(){return e.handleClick("unemployment")}},"Current Employment"),this.showGrid())}}]),t}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(T,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[110,2,1]]]);
//# sourceMappingURL=main.f63a3af7.chunk.js.map